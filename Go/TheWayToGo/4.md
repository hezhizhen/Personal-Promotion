# 第4章：基本结构和基本数据类型

## 4.1 文件名、关键字与标识符

- 以`.go`为后缀，文件名均由小写字母和下划线组成
- 区分大小写
- `_`是一个特殊标识符，称为空白标识符，任何赋给其的值都将被抛弃
- 匿名变量：没有名称的变量、类型、方法
- 25个关键字
- 36个预定义标识符
- 不需要以`;`结尾，Go编译器自动完成

## 4.2 Go程序的基本结构和要素

### 4.2.1 包的概念、导入与可见性

每个程序都由包的概念组成，可以使用自身的包或者从其他包中导入内容。每个Go文件都属于且仅属于一个包。一个包可以由许多以`.go`为扩展名的文件组成，文件名和报名一般来说都不相同

在源文件非注释的第一行指明文件属于哪个包。`package main`表示一个可独立执行的程序，每个Go应用程序都包含一个名为`main`的包。一个应用程序可以包含不同的包，即使只使用main包也不必都写在一个文件里：用一些较小的文件，每个文件非注释的第一行都使用`package main`来指明这些文件都属于main包。如果打算编译包名不是main的源文件如`pack1`，编译后产生`pack1.a`而不是可执行程序。所有包名都使用小写字母

标准库为可以直接使用的包，也可以创建自己的包。包和包内的文件都必须以正确的顺序进行编译，包的依赖关系决定了其构建顺序。属于同一个包的源文件必须被一起编译，一个包即编译时的一个单元，每个目录都只包含一个包。如果对一个包进行更改或重新编译，所有引用了这个包的客户端程序都必须全部重新编译。Go中的包模型采用了显示依赖关系的机制来快速编译，编译器会从`.o`文件中提取传递依赖类型的信息。每一段代码只被编译一次。一个Go程序通过import将一组包链接在一起。导入多个包时，导入的顺序会按字母排序。导入包即包含了这个包的所有代码对象。

标识符以大写字母开头时可以被外部包的代码所使用，称为导出；以小写字母开头则对包外不可见

`import fm "fmt"` 为包fmt设置别名fm

导入包却没有使用会报错；在导入包后可以定义或声明0或多个常量、变量、类型，其作用域为全局，然后声明1或多个函数

### 4.2.2 函数

`func functionName()` 可以在括号中写入0或多个参数，使用`,`分隔，每个参数名称后面跟着类型

main函数是每个可执行程序必须包含的，是启动后第一个执行的函数（除init()外）。main函数无参数或返回类型，否则报错。程序开始执行并完成初始化后，第一个调用（程序的入口点）的函数为main.main()，一旦返回就表示程序已成功执行并立即退出。函数体使用大括号括起来，`{`必须与方法的声明在同一行，`}`放在函数体的下一行，或同一行

```
func functionName (parameter_list) (return_value_list) {
    ...
}
```

导出函数遵循Pascal命名法，其他遵循骆驼命名法（第一个单词的首字母小写，其余单词的首字母大写）

调用`fmt`包中的`Println`函数时会在最后自动增加换行字符

程序正常退出的代码为0，异常终止时返回非零值

### 4.2.3 注释

单行注释：`//`

多行注释/块注释：`/*`和`*/`

在package语句之前的块注释默认认为是这个包的文档说明，其中应该提供一些相关信息并对整体功能做简要的介绍。多段注释之间应以空格分隔加以区分

几乎所有全局作用域的类型、常量、变量、函数和被导出的对象都要有合理的注释。如果这种注释（文档注释）出现在函数前，则要以函数名为开头

### 4.2.4 类型

使用var声明的变量的值会自动初始化为该类型的零值

类型定义了某个变量的值的集合与可对其进行操作的集合

结构化的类型没有真正的值，使用nil作为默认值。Go语言不存在类型继承

```
func FunctionName (a typea, b typeb) typeFunc
```

函数可以是一个确定的类型，可以函数作为返回类型。这种类型的声明要写在函数名和可选的参数列表之后

```
return var
```

可以在函数体中的某处返回使用类型为typeFunc的变量var

```
func FunctionName (a typea, b typeb) (t1 type1, t2 type2)
```

函数可以有多个返回值，返回类型之间需要使用逗号分割，并用小括号将它们括起来

```
return var1, var2
```

多返回值一般用于判断某个函数是否执行成功，或与其他返回值一同返回错误消息

```
type IZ int
```

使用`type`定义自己的类型，如结构体，也可以定义一个已经存在的类型的别名

因式分解关键字（以小括号将变量括起来）

### 4.2.5 Go程序的一般结构

1. 在完成包的import之后，对常量、变量、类型定义或声明
2. 如果存在init函数，则对该函数定义
3. 如果当前包是main包，则定义main函数
4. 然后定义其余函数。首先是类型的方法，接着是按照main函数中先后调用的顺序来定义相关函数（也可以按字母顺序）

### 4.2.6 类型转换

所有的转换必须显式说明，就像调用函数（类型可以看做一种函数）

```
valueOfTypeB = typeB(valueOfTypeA)
```

类型B的值 = 类型B（类型A的值）

### 4.2.7 Go命名规范

名称不需要指出自己所属的包，在调用时会使用包名作为限定符

返回某个对象的函数或方法的名称一般都是使用名词

如果修改某个对象，则使用`SetName`

有必要时使用大小写混合的方式，而非使用下划线来分割